<div class="grid-header">
  <input
    type="text"
    [placeholder]="'User.Search' | translate"
    [(ngModel)]="searchTerm"
    (input)="onSearchChange()"
  />
</div>

<table class="custom-grid">
  <thead>
    <tr>
      <th *ngIf="config.checkboxSelection">
        <input
          type="checkbox"
          [checked]="selectAllCurrentPage"
          (change)="onSelectAllChange($event)"
        />
      </th>

      <th
        *ngFor="let col of config.columns"
        (click)="col.sortable && onSort(col.field)"
      >
        {{ col.header | translate }}
        <span *ngIf="sortColumn === col.field">
          {{ sortDirection === "asc" ? "▲" : "▼" }}
        </span>
      </th>

      <th *ngIf="config.actions?.length">Actions</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let row of data">
      <td *ngIf="config.checkboxSelection">
        <input
          type="checkbox"
          [checked]="selectedIds.has(row.id)"
          (change)="onSelectRowChange(row.id, $event)"
        />
      </td>

      <td *ngFor="let col of config.columns">
        {{ getCellValue(row, col.field) }}
      </td>

      <td *ngIf="config.actions?.length">
        <button
          *ngFor="let action of config.actions"
          [ngClass]="['btn', action.type]"
          (click)="action.onClick(row)"
        >
          {{ action.label | translate }}
        </button>
      </td>
    </tr>
  </tbody>
</table>
<div class="pagination">
  <button
    [disabled]="currentPage === 1"
    (click)="onPageChange(currentPage - 1)"
  >
    Prev
  </button>

  <span>
    Page {{ currentPage }} / {{ Math.ceil(totalRecords / pageSize) }}
  </span>

  <button
    [disabled]="currentPage >= totalRecords / pageSize"
    (click)="onPageChange(currentPage + 1)"
  >
    Next
  </button>

  <!-- ✅ Page Size Dropdown -->
  <div class="page-size">
    <label>
      Show
      <select [(ngModel)]="pageSize" (change)="onPageSizeChange()">
        <option *ngFor="let size of config.pageSizeOptions" [value]="size">
          {{ size }}
        </option>
      </select>
    </label>
  </div>
</div>
