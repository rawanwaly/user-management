<div class="grid-header">
  <input
    type="text"
    [placeholder]="'User.Search' | translate"
    [(ngModel)]="searchTerm"
    (input)="onSearchChange()"
  />
</div>
<div *ngIf="anySelected" class="bulk-actions">
  <button class="action-btn clear-btn" title="Clear Selection" (click)="onClearSelection()">
    <i class="fas fa-times"></i>
  </button>
  <button class="action-btn export-btn" title="Export Selected" (click)="onBulkExport()">
    <i class="fas fa-file-export"></i>
  </button>
  <button class="action-btn delete-btn" title="Deactivate Selected" (click)="onDeactivateSelected()">
    <i class="fas fa-trash"></i>
  </button>

  <button class="action-btn" title="Activate Selected" (click)="onActivateSelected()">
    <i class="fas fa-user-check"></i>
  </button>
</div>

<table class="custom-grid">
  <thead>
    <tr>
      <th *ngIf="config.checkboxSelection">
        <input
          type="checkbox"
          [checked]="selectAllCurrentPage"
          (change)="onSelectAllChange($event)"
        />
      </th>

      <th
        *ngFor="let col of config.columns"
        (click)="col.sortable && onSort(col.field)"
      >
        {{ col.header | translate }}
        <span *ngIf="sortColumn === col.field">
          {{ sortDirection === "asc" ? "▲" : "▼" }}
        </span>
      </th>

      <th *ngIf="config.actions?.length">Actions</th>
    </tr>
  </thead>

<tbody>
  <tr *ngFor="let row of data"
      [ngClass]="config.rowClass ? config.rowClass(row) : ''">
    <td *ngIf="config.checkboxSelection">
      <input
        type="checkbox"
        [checked]="selectedIds.has(row.id)"
        (change)="onSelectRowChange(row.id, $event)"
      />
    </td>

    <td *ngFor="let col of config.columns">
      {{ getCellValue(row, col.field) }}
    </td>

    <td *ngIf="config.actions?.length">
      <button
        *ngFor="let action of config.actions"
        [ngClass]="['btn', action.type]"
        (click)="action.onClick(row)"
      >
        {{ action.label | translate }}
      </button>
    </td>
  </tr>
</tbody>
</table>
<div class="pagination">
  <button
    [disabled]="currentPage === 1"
    (click)="onPageChange(currentPage - 1)"
  >
    Prev
  </button>

  <span>
    Page {{ currentPage }} / {{ Math.ceil(totalRecords / pageSize) }}
  </span>

  <button
    [disabled]="currentPage >= totalRecords / pageSize"
    (click)="onPageChange(currentPage + 1)"
  >
    Next
  </button>

  <!-- ✅ Page Size Dropdown -->
  <div class="page-size">
    <label>
      Show
      <select [(ngModel)]="pageSize" (change)="onPageSizeChange()">
        <option *ngFor="let size of config.pageSizeOptions" [value]="size">
          {{ size }}
        </option>
      </select>
    </label>
  </div>
</div>
